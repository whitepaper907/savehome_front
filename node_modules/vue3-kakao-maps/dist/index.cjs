(function(f,e){typeof exports=="object"&&typeof module<"u"?e(exports,require("vue")):typeof define=="function"&&define.amd?define(["exports","vue"],e):(f=typeof globalThis<"u"?globalThis:f||self,e(f.Vue3KakaoMaps={},f.Vue))})(this,function(f,e){"use strict";const g=e.ref(!1),_=(u,p)=>{const s=document.createElement("script"),t=p!=null&&p.length>0?`&libraries=${p.join(",")}`:"";s.id="kakao-map-api-script",s.src=`//dapi.kakao.com/v2/maps/sdk.js?appkey=${u}&autoload=false${t}`,document.body.appendChild(s),s.onload=()=>{kakao.maps.load(()=>{g.value=!0})}},L=e.defineComponent({__name:"KakaoMap",props:{width:{default:"40rem"},height:{default:"30rem"},markerList:{},infoWindowList:{},markerCluster:{},lat:{},lng:{},level:{default:3},mapTypeId:{},draggable:{type:Boolean,default:!0},scrollwheel:{type:Boolean,default:!0},disableDoubleClick:{type:Boolean,default:!1},disableDoubleClickZoom:{type:Boolean,default:!1},projectionId:{default:"kakao.maps.ProjectionId.WCONG"},tileAnimation:{type:Boolean,default:!0},keyboardShortcuts:{type:[Boolean,Object]}},emits:["onLoadKakaoMap"],setup(u,{emit:p}){const s=u,t=p,a=e.ref(null),k=e.ref();e.provide("mapRef",k);const d=()=>{const l={center:new kakao.maps.LatLng(s.lat,s.lng),...s};a.value!==null&&(k.value=new window.kakao.maps.Map(a.value,l),t("onLoadKakaoMap",k.value))},h=e.ref(),i=l=>{if(l.markers===void 0)throw new Error("MarkerList가 없습니다.");if(k.value!==null){const c=e.ref([]);l.markers.forEach(o=>{var m;const r=new kakao.maps.Marker({position:new kakao.maps.LatLng(o.lat,o.lng),image:o.image??void 0,title:o.title??void 0,draggable:typeof o.draggable=="boolean"?o.draggable:!1,clickable:typeof o.clickable=="boolean"?o.clickable:!1,zIndex:typeof o.zIndex=="number"?o.zIndex:0,opacity:o.opacity??1,altitude:o.altitude??0,range:o.range??void 0});(m=c.value)==null||m.push(r)}),h.value=new kakao.maps.MarkerClusterer({map:e.toRaw(k.value),...l,markers:c.value})}};e.onMounted(()=>{g.value&&(d(),s.markerCluster!==void 0&&i(s.markerCluster))}),e.watch(()=>g.value,l=>{l&&(d(),s.markerCluster!==void 0&&i(s.markerCluster))});const n=e.computed(()=>({width:isFinite(+s.width)?s.width+"px":s.width,height:isFinite(+s.height)?s.height+"px":s.height}));return e.watch([()=>s.lat,()=>s.lng],([l,c])=>{var o;(o=k.value)==null||o.panTo(new kakao.maps.LatLng(l,c))}),e.watch(()=>s.draggable,l=>{var c,o;l===void 0||l?(c=k.value)==null||c.setDraggable(!0):(o=k.value)==null||o.setDraggable(!1)}),e.watch(()=>s.level,l=>{var c,o;l===void 0?(c=k.value)==null||c.setLevel(3):(o=k.value)==null||o.setLevel(l)}),e.watch(()=>s.mapTypeId,l=>{var c,o;l===void 0?(c=k.value)==null||c.setMapTypeId(3):(o=k.value)==null||o.setMapTypeId(l)}),e.watch(()=>s.scrollwheel,l=>{var c,o;l===void 0?(c=k.value)==null||c.setZoomable(!0):(o=k.value)==null||o.setZoomable(l)}),e.watch(()=>s.projectionId,l=>{var c,o;l===void 0?(c=k.value)==null||c.setProjectionId(kakao.maps.ProjectionId.WCONG):(o=k.value)==null||o.setProjectionId(l)}),e.watch(()=>s.keyboardShortcuts,l=>{var c,o;l===void 0?(c=k.value)==null||c.setKeyboardShortcuts(!1):typeof l=="boolean"&&((o=k.value)==null||o.setKeyboardShortcuts(l))}),(l,c)=>(e.openBlock(),e.createElementBlock("div",{ref_key:"kakaoMapRef",ref:a,style:e.normalizeStyle(n.value)},[s.markerList&&s.markerCluster===void 0?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:0},e.renderList(s.markerList,(o,r)=>(e.openBlock(),e.createBlock(e.unref(w),{key:o.key===void 0?r:o.key,lat:o.lat,lng:o.lng,"info-window":o==null?void 0:o.infoWindow,draggable:o.draggable,image:o.image,order:o.order,"order-bottom-margin":o.orderBottomMargin},null,8,["lat","lng","info-window","draggable","image","order","order-bottom-margin"]))),128)):e.createCommentVNode("",!0),s.infoWindowList?(e.openBlock(!0),e.createElementBlock(e.Fragment,{key:1},e.renderList(s.infoWindowList,(o,r)=>(e.openBlock(),e.createBlock(e.unref(y),{key:o.key===void 0?r:o.key,lat:o.lat,lng:o.lng,content:o.content,visible:o.visible},null,8,["lat","lng","content","visible"]))),128)):e.createCommentVNode("",!0),e.renderSlot(l.$slots,"default")],4))}}),E=30,I=30,P={imageSrc:"https://t1.daumcdn.net/mapjsapi/images/2x/marker.png",imageWidth:29,imageHeight:42,imageOption:{}},w=e.defineComponent({__name:"KakaoMapMarker",props:{lat:{},lng:{},infoWindow:{},visible:{type:Boolean},image:{},title:{},draggable:{type:Boolean},clickable:{type:Boolean},zIndex:{},opacity:{},altitude:{},range:{},order:{},orderBottomMargin:{}},emits:["onLoadKakaoMapMarker","onClickKakaoMapMarker","dragEndKakaoMapMarker","mouseOverKakaoMapMarker","mouseOutKakaoMapMarker","deleteKakaoMapMarker"],setup(u,{emit:p}){const s=p,t=u,a=e.ref(),k=e.inject("mapRef"),d=r=>{if(r!=null){if(r.imageSrc===void 0)throw new Error("이미지 경로가 존재하지 않습니다.")}else r=P;const m=new kakao.maps.MarkerImage(r.imageSrc,new kakao.maps.Size(r.imageWidth??E,r.imageHeight??I),r.imageOption);a.value!==void 0&&a.value.setImage(m)},h=r=>{if(t.lat===void 0||t.lng===void 0)throw new Error("marker의 위치가 없습니다.");const m=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.Marker({position:m,title:t.title,draggable:t.draggable,clickable:t.clickable,zIndex:t.zIndex,opacity:t.opacity,altitude:t.altitude,range:t.range}),d(t.image),s("onLoadKakaoMapMarker",a.value),a.value.setMap(r),i(a.value),l(a.value),c(a.value),n(r,a.value)},i=r=>{kakao.maps.event.addListener(r,"click",()=>{s("onClickKakaoMapMarker")})},n=(r,m)=>{kakao.maps.event.addListener(m,"dragend",function(M){s("dragEndKakaoMapMarker",m)})},l=r=>{kakao.maps.event.addListener(r,"mouseover",()=>{s("mouseOverKakaoMapMarker")})},c=r=>{kakao.maps.event.addListener(r,"mouseout",()=>{s("mouseOutKakaoMapMarker")})},o=r=>`<div style="position:relative; bottom:${t.orderBottomMargin}">
        ${r}
      </div>`;return e.onBeforeUnmount(()=>{var r;s("deleteKakaoMapMarker",a),(r=a.value)==null||r.setMap(null)}),e.watch([()=>g.value,()=>k,()=>k==null?void 0:k.value],([r,m,M])=>{r&&m!==void 0&&M!==void 0&&h(M)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([r,m])=>{var M;g.value&&((M=a.value)==null||M.setPosition(new kakao.maps.LatLng(r,m)))}),e.watch([()=>t.image],()=>{d(t.image)}),e.watch(()=>t.title,r=>{var m;r!==void 0&&((m=a.value)==null||m.setTitle(r))}),e.watch(()=>t.draggable,r=>{var m;(m=a.value)==null||m.setDraggable(r!==void 0&&r)}),e.watch(()=>t.clickable,r=>{var m;(m=a.value)==null||m.setDraggable(r!==void 0&&r)}),e.watch(()=>t.zIndex,r=>{var m;r!==void 0&&isFinite(r)&&((m=a.value)==null||m.setZIndex(Number(r)))}),e.watch(()=>t.opacity,r=>{var m,M;r!==void 0&&isFinite(r)?(m=a.value)==null||m.setOpacity(Number(r)):(M=a.value)==null||M.setOpacity(1)}),(r,m)=>{var M,K,C;return e.openBlock(),e.createElementBlock("div",null,[r.$slots.infoWindow?(e.openBlock(),e.createBlock(e.unref(y),{key:0,marker:a.value,lat:t.lat,lng:t.lng,visible:(M=t==null?void 0:t.infoWindow)==null?void 0:M.visible},{default:e.withCtx(()=>[e.renderSlot(r.$slots,"infoWindow")]),_:3},8,["marker","lat","lng","visible"])):t.infoWindow?(e.openBlock(),e.createBlock(e.unref(y),{key:1,marker:a.value,lat:t.lat,lng:t.lng,content:(K=t==null?void 0:t.infoWindow)==null?void 0:K.content,visible:(C=t==null?void 0:t.infoWindow)==null?void 0:C.visible},null,8,["marker","lat","lng","content","visible"])):e.createCommentVNode("",!0),t.order?(e.openBlock(),e.createBlock(e.unref(b),{key:2,lat:t.lat,lng:t.lng,"y-anchor":0,content:o(t.order)},null,8,["lat","lng","content"])):e.createCommentVNode("",!0)])}}}),O={key:0},y=e.defineComponent({__name:"KakaoMapInfoWindow",props:{lat:{},lng:{},marker:{},content:{},disableAutoPan:{type:Boolean},removable:{type:Boolean,default:!1},zIndex:{},altitude:{},range:{default:500},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapInfoWindow"],setup(u,{emit:p}){const s=p,t=u,a=e.ref(),k=e.ref(),d=e.inject("mapRef"),h=i=>{var l,c;if(t.lat===void 0||t.lng===void 0)throw new Error("infoWindow의 위치가 없습니다.");const n=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.InfoWindow({position:n,content:k.value??t.content??"",removable:t.removable,disableAutoPan:t.disableAutoPan,zIndex:t.zIndex,altitude:t.altitude,range:t.range}),t.visible&&(s("onLoadKakaoMapInfoWindow",a.value),t.marker!==void 0?(l=a==null?void 0:a.value)==null||l.open(i,t.marker):(c=a==null?void 0:a.value)==null||c.open(i))};return e.onBeforeUnmount(()=>{(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),e.watch([()=>g.value,()=>d==null?void 0:d.value,()=>g,()=>d],([i,n])=>{t.visible&&i&&n!==void 0&&n!==null&&h(n)},{immediate:!0}),e.watch(()=>t.marker,i=>{var n,l,c;!t.visible||(d==null?void 0:d.value)===void 0||(a.value!=null&&((n=a.value)==null||n.close()),i!==void 0?(l=a==null?void 0:a.value)==null||l.open(d==null?void 0:d.value,i):(c=a==null?void 0:a.value)==null||c.open(d==null?void 0:d.value))},{immediate:!0}),e.watch([()=>k==null?void 0:k.value,()=>k],([i,n])=>{var l;i!==void 0&&((l=a.value)==null||l.setContent(i))},{deep:!0}),e.watch([()=>t.lat,()=>t.lng],([i,n])=>{var l;(l=a.value)==null||l.setPosition(new kakao.maps.LatLng(i,n))}),e.watch(()=>t.content,i=>{var n;(n=a.value)==null||n.setContent(i??"")}),e.watch(()=>t.zIndex,i=>{var n;(n=a.value)==null||n.setZIndex(i??0)}),e.watch(()=>t.altitude,i=>{var n;(n=a.value)==null||n.setAltitude(i??0)}),e.watch(()=>t.range,i=>{var n;(n=a.value)==null||n.setRange(i??500)}),e.watch(()=>t.visible,i=>{i?g!=null&&g.value&&(d==null?void 0:d.value)!==void 0&&(d==null?void 0:d.value)!==null&&h(d.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&a.value.close()}),(i,n)=>t.content&&t.content.length>0||i.$slots.default?(e.openBlock(),e.createElementBlock("div",O,[i.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:k},[e.renderSlot(i.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),A={key:0},b=e.defineComponent({__name:"KakaoMapCustomOverlay",props:{lat:{},lng:{},content:{},xAnchor:{default:.5},yAnchor:{default:.5},zIndex:{},clickable:{type:Boolean,default:!1},visible:{type:Boolean,default:!0}},emits:["onLoadKakaoMapCustomOverlay"],setup(u,{emit:p}){const s=p,t=u,a=e.ref(),k=e.ref(),d=e.inject("mapRef"),h=i=>{if(t.lat===void 0||t.lng===void 0)throw new Error("KakaoMapCustomOverlay의 위치가 없습니다.");const n=new kakao.maps.LatLng(t.lat,t.lng);a.value=new kakao.maps.CustomOverlay({position:n,content:k.value??t.content??"",xAnchor:t.xAnchor,yAnchor:t.yAnchor,zIndex:t.zIndex,clickable:t.clickable}),t.visible&&(a.value.setMap(i),s("onLoadKakaoMapCustomOverlay",a.value))};return e.onBeforeUnmount(()=>{var i;a.value!==null&&((i=a.value)==null||i.setMap(null))}),e.watch([()=>g.value,()=>d==null?void 0:d.value,()=>g,()=>d],([i,n])=>{t.visible&&i&&n!==void 0&&n!==null&&h(n)},{immediate:!0}),e.watch([()=>t.lat,()=>t.lng],([i,n])=>{var l;(l=a.value)==null||l.setPosition(new kakao.maps.LatLng(i,n))}),e.watch(()=>t.content,i=>{var n;(n=a.value)==null||n.setContent(i??"")}),e.watch(()=>t.zIndex,i=>{var n;(n=a.value)==null||n.setZIndex(i??0)}),e.watch(()=>t.visible,i=>{var n;i?g!=null&&g.value&&(d==null?void 0:d.value)!==void 0&&(d==null?void 0:d.value)!==null&&h(d.value):(a==null?void 0:a.value)!==null&&a.value!==void 0&&((n=a.value)==null||n.setMap(null))}),(i,n)=>t.content&&t.content.length>0||i.$slots.default?(e.openBlock(),e.createElementBlock("div",A,[i.$slots.default?(e.openBlock(),e.createElementBlock("div",{key:0,ref_key:"contentSlot",ref:k},[e.renderSlot(i.$slots,"default")],512)):e.createCommentVNode("",!0)])):e.createCommentVNode("",!0)}}),B=e.defineComponent({__name:"KakaoMapPolyline",props:{linePath:{},endArrow:{type:Boolean},strokeWeight:{default:3},strokeColor:{default:"#F10000"},strokeOpacity:{default:.6},strokeStyle:{default:"solid"},zIndex:{}},setup(u){const p=u,s=e.inject("mapRef");let t=null;const a=k=>{t=new kakao.maps.Polyline({path:p.linePath,endArrow:p.endArrow,strokeWeight:p.strokeWeight,strokeColor:p.strokeColor,strokeOpacity:p.strokeOpacity,strokeStyle:p.strokeStyle,zIndex:p.zIndex}),t.setMap(k)};return e.watch([()=>g.value,()=>s==null?void 0:s.value,()=>g,()=>s],([k,d])=>{k&&d!==void 0&&d!==null&&a(d)},{immediate:!0}),e.watch(()=>p.linePath,()=>{t==null||t.setPath(p.linePath)},{deep:!0}),e.onBeforeUnmount(()=>{t==null||t.setMap(null)}),(k,d)=>(e.openBlock(),e.createElementBlock("div",null,[e.renderSlot(k.$slots,"default")]))}}),$={key:0},S={key:1},v=e.defineComponent({__name:"KakaoMapMarkerPolyline",props:{markerList:{},endArrow:{type:Boolean},strokeWeight:{},strokeColor:{},strokeOpacity:{},strokeStyle:{},showMarkerOrder:{type:Boolean}},setup(u){const p=u,s=e.inject("mapRef");let t;const a=e.ref([]),k=n=>{a.value.push(n)},d=n=>{const l=a.value.indexOf(n);a.value.splice(l,1)},h=n=>{const l=p.markerList,c=a.value.indexOf(n);l[c].lat=n.getPosition().getLat(),l[c].lng=n.getPosition().getLng()},i=(n,l)=>`<div style="position:relative; bottom:${l}">
        ${n}
      </div>`;return e.onMounted(()=>{t=e.computed(()=>p.markerList.map(n=>new kakao.maps.LatLng(n.lat,n.lng)))}),(n,l)=>(e.openBlock(),e.createElementBlock(e.Fragment,null,[p.markerList&&e.unref(s)!==null?(e.openBlock(),e.createElementBlock("div",$,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.markerList,(c,o)=>(e.openBlock(),e.createBlock(e.unref(w),{id:o,key:c.key===void 0?o:c.key,map:e.unref(s),lat:c.lat,lng:c.lng,draggable:c.draggable,image:c.image,onOnLoadKakaoMapMarker:k,onDragEndKakaoMapMarker:h,onDeleteKakaoMapMarker:d},null,8,["id","map","lat","lng","draggable","image"]))),128)),(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(e.unref(t),(c,o)=>(e.openBlock(),e.createElementBlock("div",{key:o},[o!==e.unref(t).length-1?(e.openBlock(),e.createBlock(e.unref(B),{key:0,linePath:[c,e.unref(t)[o+1]],endArrow:p.endArrow},null,8,["linePath","endArrow"])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0),p.markerList&&p.showMarkerOrder?(e.openBlock(),e.createElementBlock("div",S,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(p.markerList,(c,o)=>(e.openBlock(),e.createBlock(e.unref(b),{key:o,lat:c.lat,lng:c.lng,"y-anchor":0,content:i(c.order!==void 0?c.order:o,c.orderBottomMargin)},null,8,["lat","lng","content"]))),128))])):e.createCommentVNode("",!0),e.renderSlot(n.$slots,"default")],64))}}),z={install:u=>{u.component("KakaoMap",L),u.component("KakaoMapMarker",w),u.component("KakaoMapCustomOverlay",b),u.component("KakaoMapInfoWindow",y),u.component("KakaoMapMarkerPolyline",v),u.component("KakaoMapPolyline",B)}};f.KakaoMap=L,f.KakaoMapCustomOverlay=b,f.KakaoMapInfoWindow=y,f.KakaoMapMarker=w,f.KakaoMapMarkerPolyline=v,f.KakaoMapPolyline=B,f.Vue3KakaoMaps=z,f.isKakaoMapApiLoaded=g,f.useKakao=_,Object.defineProperty(f,Symbol.toStringTag,{value:"Module"})});
